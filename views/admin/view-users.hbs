
<section>
  <div class="container mt-5">
    <h3 class="text-center">List of Users</h3>
    <div class="table mt-5">

    <table class="table mt-5" id="user_table">
      <thead>
        <tr>
          <th scope="col">No</th>
          <th scope="col">Name</th>
          <th scope="col">Email</th>
          <th>Block/ Unblock</th>
        </tr>
      </thead>
      <tbody>
        {{#each users}}
        <tr>
          <td scope="">{{inc @index}}</td>
          <td>{{this.firstName}}</td>
          <td>{{this.email}}</td>


          <td>{{#if this.isBlocked}}
            <button class="btn btn-primary mx-3" data-toggle="modal" data-target="#blockmodal{{this._id}}">Un block
            </button>
            {{else}}
            <button class="btn btn-danger mx-3" data-toggle="modal" data-target="#blockmodal{{this._id}}">Block
            </button>

            {{/if}}
          </td>
        </tr>
        <!-- Edit User Modal -->
        <div class="modal fade" id="blockmodal{{this._id}}" tabindex="-1" role="dialog" aria-labelledby="edit"
          aria-hidden="true">
          <div class="modal-dialog" role="document">
            <div class="modal-content">
              <div class="modal-header">
                {{#if this.isBlocked}}
                <h5 class="modal-title" id="edit">Unblock user</h5>
                {{else}}
                <h5 class="modal-title" id="edit">Block user</h5>
                {{/if}}
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
              <div class="modal-body">
                <div class="form-group d-flex justify-content-center">
                  {{#if this.isBlocked}}
                  <h4 class="h4"> Are you sure to Unblock {{this.name}}</h4>
                  <a href="/admin/unblock-user/{{this._id}}" class="btn btn-outline-primary ml-auto ">Unblock
                    user</a>
                  {{else}}
                  <h4 class="h4">Are you sure to block {{this.name}}</h4>
                  <a href="/admin/block-user/{{this._id}}" class="btn btn-outline-danger ml-auto ">Block
                    user</a>
                  {{/if}}
                </div>

              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
              </div>
            </div>
          </div>
        </div>
        {{/each}}
      </tbody>
    </table>
    </div>

  </div>
</section>


<script>
  $(function () {
    $("#user_table").dataTable();
  });
</script>